<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>今彩539投注小遊戲</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <style type="text/css">
        body {
            background-color: #f3bf66;
            font-family: '標楷體', Arial, Helvetica, sans-serif;
            padding-top: 2%;
        }

        table.border-primary td {
            width: 50%;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row">
            <div>
                <img src="Borcelle-Photoroom.png-Photoroom.png" alt="" class="mx-auto" style="display:block;max-width: 30%;">
            </div>
            <div class="container1">
                <!-- 規則 -->
                遊戲介紹:
                <div>基本玩法<br>
                    今彩539是一種樂透型遊戲，您必須從01~39的號碼中任選5個號碼進行投注。開獎時，開獎單位將隨機開出五個號碼，這一組號碼就是該期今彩539的中獎號碼，也稱為「獎號」。您的五個選號中，如有二個以上（含二個號碼）對中當期開出之五個號碼，即為中獎，並可依規定兌領獎金。
                    <p>
                        <div>
                        <table class="table-bordered border-danger">
                            <tbody>
                                <tr>
                                    <td> 獎項 </td>
                                    <td>中獎方式</td>
                                </tr>
                                <tr>
                                    <td> 頭獎 </td>
                                    <td>與當期五個中獎號碼完全相同者</td>
                                </tr>
                                <tr>
                                    <td> 貳獎 </td>
                                    <td>對中當期獎號之其中任四碼</td>
                                </tr>
                                <tr>
                                    <td> 參獎 </td>
                                    <td>對中當期獎號之其中任三碼</td>
                                </tr>
                                <tr>
                                    <td> 肆獎 </td>
                                    <td>對中當期獎號之其中任二碼</td>
                                </tr>
                            </tbody>
                        </table>
                    </p>
                    <p>頭獎中獎率約1/58萬，總中獎率約1/9</p>
                </div>
                <hr>
                <!-- bootstrap投注號碼元件 -->
                選擇投注號碼:
                <div style="height: 250px;display:flex;flex-wrap:wrap;align-content:space-around;">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="1" name="chkRights[]">
                        <label class="form-check-label" for="check01">01</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="2" name="chkRights[]">
                        <label class="form-check-label" for="check01">02</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="3" name="chkRights[]">
                        <label class="form-check-label" for="check01">03</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="4" name="chkRights[]">
                        <label class="form-check-label" for="check01">04</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="5" name="chkRights[]">
                        <label class="form-check-label" for="check01">05</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="6" name="chkRights[]">
                        <label class="form-check-label" for="check01">06</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="7" name="chkRights[]">
                        <label class="form-check-label" for="check01">07</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="8" name="chkRights[]">
                        <label class="form-check-label" for="check01">08</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="9" name="chkRights[]">
                        <label class="form-check-label" for="check01">09</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="10" name="chkRights[]">
                        <label class="form-check-label" for="check01">10</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="11" name="chkRights[]">
                        <label class="form-check-label" for="check01">11</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="12" name="chkRights[]">
                        <label class="form-check-label" for="check01">12</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="13" name="chkRights[]">
                        <label class="form-check-label" for="check01">13</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="14" name="chkRights[]">
                        <label class="form-check-label" for="check01">14</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="15" name="chkRights[]">
                        <label class="form-check-label" for="check01">15</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="16" name="chkRights[]">
                        <label class="form-check-label" for="check01">16</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="17" name="chkRights[]">
                        <label class="form-check-label" for="check01">17</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="18" name="chkRights[]">
                        <label class="form-check-label" for="check01">18</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="19" name="chkRights[]">
                        <label class="form-check-label" for="check01">19</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="20" name="chkRights[]">
                        <label class="form-check-label" for="check01">20</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="21" name="chkRights[]">
                        <label class="form-check-label" for="check01">21</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="22" name="chkRights[]">
                        <label class="form-check-label" for="check01">22</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="23" name="chkRights[]">
                        <label class="form-check-label" for="check01">23</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="24" name="chkRights[]">
                        <label class="form-check-label" for="check01">24</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="25" name="chkRights[]">
                        <label class="form-check-label" for="check01">25</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="26" name="chkRights[]">
                        <label class="form-check-label" for="check01">26</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="27" name="chkRights[]">
                        <label class="form-check-label" for="check01">27</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="28" name="chkRights[]">
                        <label class="form-check-label" for="check01">28</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="29" name="chkRights[]">
                        <label class="form-check-label" for="check01">29</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="30" name="chkRights[]">
                        <label class="form-check-label" for="check01">30</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="31" name="chkRights[]">
                        <label class="form-check-label" for="check01">31</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="32" name="chkRights[]">
                        <label class="form-check-label" for="check01">32</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="33" name="chkRights[]">
                        <label class="form-check-label" for="check01">33</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="34" name="chkRights[]">
                        <label class="form-check-label" for="check01">34</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="35" name="chkRights[]">
                        <label class="form-check-label" for="check01">35</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="36" name="chkRights[]">
                        <label class="form-check-label" for="check01">36</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="37" name="chkRights[]">
                        <label class="form-check-label" for="check01">37</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="38" name="chkRights[]">
                        <label class="form-check-label" for="check01">38</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" value="39" name="chkRights[]">
                        <label class="form-check-label" for="check01">39</label>
                    </div>
                </div>
            </div>


            <tr>
                <td>
                    <button type="button" class="btn btn-success" onclick="autoChoiceNew()">電腦選號</button>
                    <button type="button" class="btn btn-primary ms-2" onclick="reset()">清除重選</button>
                </td>
                <td>獎金分配方式<br>
                    雙贏彩所有獎項皆為固定獎項，個獎項金額如下：<br>
                    <table class="table-bordered border-info">
                        <thead>
                            <tr>
                                <td>獎項</td>
                                <td>頭獎</td>
                                <td>貳獎</td>
                                <td>參獎</td>
                                <td>肆獎</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>單注獎金</td>
                                <td>$15,000,000</td>
                                <td>$100,000</td>
                                <td>$500</td>
                                <td>$100</td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <table>
            <tr>
                <td><button type="button" class="btn btn-danger" onclick="openWinner()">進行開獎</button>
                </td>
                <td><div id="draw1">開獎號碼：</div></td>
            </tr>
            <tr>
                <td colspan="2" id="draw2">開獎狀態： </td>
            </tr>
            </tbody>
            </table>
        </div>
    </div>
    <script type="text/javascript" src="./comlib.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

    <script type="text/javascript">
        //或許name為"chkRights[]"的html元素 (24個複選框)
        var chk_arr = document.getElementsByName("chkRights[]");
        var chklength = chk_arr.length;     //使用 length 屬性來獲取 chk_arr 陣列的長度/元素的數量
        //輸出複選框的數量到控制台
        console.log(chk_arr);

        // 勾選時(checked) 將會設定為true
        // 清除所有號碼勾選函數
        function reset() {
            for (let i = 0; i <= 38; i++) {
                chk_arr[i].checked = false;       //不管有沒有勾選 一律全部清除
            }
        }

        // 自動選號函數
        function autoChoice() {
            //先清除所有選擇
            reset();
            //產生12個電腦選號程式
            /*  從0開始產生 選號 累加1
             每次從0-23元件選擇一個號碼 有23個選擇 */
            for (let i = 0; i <= 5; i++) {
                let chkData = rand(0, 38);
                //檢查值是否有被選擇
                if (chk_arr[chkData].checked == false) {    //無勾選
                    chk_arr[chkData].checked = true;        //有勾選
                    // 設定為 會自動勾選
                } else {
                    i--;  //如果本來有打勾 會跳過
                }
            }
        }

        // 自動選號函數 NEW
        // (1)保留原有選擇  (2)產生其他的彩球
        function autoChoiceNew() {
            // 先清除所有選擇
            // reset();
            var countBall = 0;  //用來放目前被選擇到的彩球

            for (let i = 0; i <= 38; i++) {
                if (chk_arr[i].checked == true) {   //計算有多少號碼被勾選
                    countBall++;
                }
            }
            if (countBall >= 5) {
                alert("電腦選號原投注號碼大於或等於5注");    //驗證 大於12注無法繼續執行
                return false;
            }
            //產生其他彩球程式
            for (let i = 0; i <= (4 - countBall); i++) {
                let chkData = rand(0, 38);
                if (chk_arr[chkData].checked == false) {
                    chk_arr[chkData].checked = true;
                } else {
                    i--;
                }
            }
        }

        // 開獎函數
        function openWinner() {
            var tableEle1 = document.querySelector("#draw1"); //取得表格4列1欄
            var tableEle2 = document.getElementById("draw2"); //取得表格5列0欄
            let winBall = new Array();      //存贏球陣列
            let ball = new Array();         //開獎球存陣列
            let selectBall = new Array();   //選擇球存陣列
            let result = ""; //存結果變數
            for (let i = 0; i <= 38; i++) {
                if (chk_arr[i].checked == true) {   //計算有多少號碼被勾選
                    selectBall.push(i + 1);
                }
            }
            console.log(selectBall)
            if (selectBall.length != 5) {
                alert("投注號碼不可以小於或大於12注");
                return false;
            }
            for (let i = 0; i <= 4; i++) {         //進行開獎,共開12球
                let chkData = rand(1, 39);          //開獎範圍1-24, 每次開一球存chkData
                if (ball.indexOf(chkData) == -1) {  //檢查開獎球是否有重複
                    ball.push(chkData);              //如果沒重複 存入Ball陣列
                    // 判斷有沒有在選擇的號碼勾選中
                    if (chk_arr[chkData - 1].checked == true) {
                        winBall.push(chkData);  //檢查第幾球中獎 如果有中獎 需將值保留下來
                    }
                } else {//判斷重複時(例如隨機出兩個3)，遞減回到０重新開獎
                    i--;
                }
            }
            //將結果插入表格中
        
            tableEle1.innerHTML = "<h4>開獎號碼：" + ball + "</h4><h4>排序號碼：" + ball.sort(function (a, b) { return a - b; }) + "</h4>";
            result = result + "<h4>投注號碼" + selectBall + "</h4>";
            result = result + "<h4>對中當期獎號：" + winBall.length + "，中獎號碼" + winBall.sort(function (a, b) { return a - b; }) + "</h4>";
            result = result + "<h4>中獎狀態：" + getBonus(winBall.length) + "</h4>";
            tableEle2.innerHTML = result;
        }


        // 取得中獎資訊與金額
        function getBonus(level) {
            switch (level) {
                case 5:
                    return ("頭獎：$8,000,000");
                    break;
                case 4:
                    return ("貳獎：$20,000");
                    break;
                case 3:
                    return ("參獎：$300");
                    break;
                case 2:
                    return ("肆獎：$50");
                    break;
                default:
                    return ("無中獎！");
                    break;
            }
        }
    </script>
</body>

</html>